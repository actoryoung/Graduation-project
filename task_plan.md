# Task Plan: 多模态情感分析系统（毕业设计）
<!--
  WHAT: 毕业设计项目的路线图和工作记录
  WHY: 记录项目目标、阶段、决策和错误，保持方向清晰
  WHEN: 在开始工作前创建，每个阶段完成后更新
-->

## 项目目标
<!--
  WHAT: 一句话描述项目要实现的目标
  WHY: 这是项目的"北极星"，保持专注
-->
基于CMU-MOSEI数据集构建多模态情感分析系统，采用注意力融合机制处理类别不平衡问题，完成毕业设计论文和演示系统。

## 项目状态
<!--
  WHAT: 当前项目所处的阶段
  WHY: 快速了解项目进度
-->
**当前状态**: 论文撰写完成，模型训练完成，Web演示已实现
**当前阶段**: 架构迁移实验（Transformer融合模块）

## 项目阶段

### Phase 1: 数据集分析与理解（已完成）
<!--
  WHAT: 理解CMU-MOSEI SDK子集数据特性
  WHY: 首次系统分析SDK子集，发现数据不平衡问题
-->
- [x] 分析CMU-MOSEI SDK子集数据分布
- [x] 发现类别不平衡问题（Negative类仅8.8%）
- [x] 文档化数据特性发现
- **状态:** complete

### Phase 2: 模型设计与实现（已完成）
<!--
  WHAT: 实现多模态融合模型
  WHY: 核心创新点：跨模态注意力融合
-->
- [x] 实现注意力融合模块 (fusion_module.py)
- [x] 实现BERT混合模型 (bert_hybrid_model_3class.py)
- [x] 实现Transformer融合模块 (transformer_fusion.py)
- **状态:** complete

### Phase 3: 模型训练与优化（已完成）
<!--
  WHAT: 训练模型并优化类别不平衡问题
  WHY: 系统性优化方案，Macro F1提升21.3%
-->
- [x] 基线模型训练
- [x] 类别权重实验
- [x] 阈值优化（0.38→0.30）
- [x] S10完整优化方案
- **状态:** complete

### Phase 4: 架构迁移实验（进行中）
<!--
  WHAT: 迁移到Transformer架构，验证架构对比效果
  WHY: 消融实验重要组成部分
-->
- [ ] 完成Transformer融合模块训练
- [ ] 对比LSTM vs Transformer性能
- [ ] 记录架构差异分析
- [ ] 更新论文相关章节
- **状态:** in_progress

### Phase 5: Web演示系统（已完成）
<!--
  WHAT: 基于Streamlit的交互式演示界面
  WHY: 展示系统功能，支持可视化分析
-->
- [x] 实现S7版本Web应用
- [x] 集成模型预测功能
- [x] 添加可视化分析
- **状态:** complete

### Phase 6: 论文撰写（已完成）
<!--
  WHAT: 完成毕业设计论文（34,000字，6章节）
  WHY: 毕业要求
-->
- [x] 完成第1-6章
- [x] 完成中英文摘要
- [x] 完成参考文献（35篇）
- [x] 生成8张学术图表
- **状态:** complete

## 技术栈
<!--
  WHAT: 项目使用的主要技术和框架
  WHY: 记录技术选型，便于后续维护和扩展
-->
| 类别 | 技术 | 版本 |
|------|------|------|
| 深度学习框架 | PyTorch | 2.5.0 |
| 文本特征 | GloVe | 300D |
| 文本特征 | BERT | Base |
| 音频特征 | COVAREP | 74D |
| 音频特征 | wav2vec | - |
| 视觉特征 | OpenFace | 710D |
| 视觉特征 | ResNet | - |
| Web框架 | Streamlit | 1.28.0 |

## 关键创新点
<!--
  WHAT: 项目的主要创新点
  WHY: 明确项目贡献
-->
1. **SDK子集数据特性发现**: 首次系统分析CMU-MOSEI SDK子集特性
2. **注意力融合机制**: 多头跨模态注意力实现动态模态交互
3. **系统性类别不平衡解决方案**: 阈值优化+损失函数对比+重新训练
4. **工程化实现**: 完整的Web演示系统

## 性能指标
<!--
  WHAT: 模型的最终性能
  WHY: 验证项目成果
-->
| 指标 | 数值 | 说明 |
|------|------|------|
| 准确率 | 58.88% | 测试集 |
| Macro F1 | 0.5011 | +21.3% 提升 |
| Negative F1 | 0.2759 | 从失效恢复 |

## 决策记录
<!--
  WHAT: 项目中的重要技术决策
  WHY: 记录决策原因，便于回顾和解释
-->
| 决策 | 原因 |
|------|------|
| 使用3类分类（-1, 0, 1） | 简化任务，聚焦类别不平衡问题 |
| 采用注意力融合机制 | 动态学习模态间交互权重 |
| 阈值从0.38降至0.30 | 提高Negative类召回率 |
| 使用类别权重损失函数 | 平衡类别影响 |

## 错误记录
<!--
  WHAT: 遇到的错误和解决方案
  WHY: 避免重复犯错，积累经验
-->
| 错误 | 尝试 | 解决方案 |
|------|------|----------|
| Negative类F1为0 | 1 | 发现阈值过高导致无Negative预测 |
|  | 2 | 降低阈值至0.30，恢复预测能力 |
| 模型训练不收敛 | 1 | 调整学习率和batch size |
|  | 2 | 使用类别权重平衡损失 |

## 待办事项
<!--
  WHAT: 当前需要完成的任务
  WHY: 保持工作重点
-->
- [ ] 完成Transformer融合模块训练
- [ ] 进行架构对比消融实验
- [ ] 更新论文架构对比章节
- [ ] 准备答辩材料

## 项目文件索引
<!--
  WHAT: 关键文件位置
  WHY: 快速定位文件
-->
| 类型 | 位置 |
|------|------|
| 模型定义 | src/models/ |
| 特征提取 | src/features/ |
| 训练脚本 | scripts/ |
| Web应用 | web/app_s7.py |
| 论文 | docs/thesis/ |
| 实验结果 | results/ |

---
*最后更新: 2026-02-09*
